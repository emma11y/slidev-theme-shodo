const __vite__fileDeps=["assets/slidev/shiki-A2-VuwJq.js","assets/monaco/bundled-types-BSQQkv1f.js","assets/modules/vue-BHIC3QRz.js","assets/modules/file-saver-igGfcqei.js","assets/monaco/bundled-types-Cjcdkwd9.css","assets/modules/shiki-CfCxQgMn.js","assets/modules/shiki-BPvBenZD.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{Q as D}from"../modules/unplugin-icons-yvtIbPUE.js";import{d as N,t as S,E as P,o,b as u,aa as J,y as H,U as z,ae as F,aJ as q,aC as U,D as K,ac as Q,aq as W,e as G,x as $,H as k,F as b,af as T,c as X,i as Y,g as B,h as Z,l as M,k as ee}from"../modules/vue-BHIC3QRz.js";import{q as te,_ as V,f as ne,l as se,n as j}from"../monaco/bundled-types-BSQQkv1f.js";import{a as ie,J as re,a8 as oe}from"../index-ByDRFW8y.js";import{_ as ae}from"./IconButton.vue_vue_type_script_setup_true_lang-CgFbssxI.js";import"../modules/file-saver-igGfcqei.js";import"../modules/shiki-CfCxQgMn.js";const L={},le=[],ce=te(async()=>{const a={javascript:O,js:O,typescript:O,ts:O},{shiki:s,themes:t}=await V(async()=>{const{shiki:i,themes:l}=await import("./shiki-A2-VuwJq.js");return{shiki:i,themes:l}},__vite__mapDeps([0,1,2,3,4,5,6])),f=await s,h=(i,l,e={})=>f.codeToHtml(i,{lang:l,theme:typeof t=="string"?t:ne.value?t.dark||"vitesse-dark":t.light||"vitesse-light",...e}),m=async(i,l,e)=>{try{const n=a[l];if(!n)throw new Error(`Runner for language "${l}" not found`);return await n(i,{options:e,highlight:h,run:async(c,r)=>await m(c,r,e)})}catch(n){return console.error(n),{error:`${n}`}}};for(const i of le){const l=await i(a);Object.assign(a,l)}return{highlight:h,run:m}});async function ue(a){const s=[],t={},f=function(...e){s.push(e.map(m))};t.info=t.log=t.debug=t.warn=t.error=f,t.clear=()=>s.length=0;const h=Object.assign({},console,t);try{const e=`return async (console, __slidev_import) => {
      ${l(a)}
    }`;await new Function(e)()(h,n=>{const c=L[n];if(!c)throw new Error(`Module not found: ${n}.
Available modules: ${Object.keys(L).join(", ")}. Please refer to https://sli.dev/custom/config-code-runners#additional-runner-dependencies`);return c})}catch(e){return{error:String(e)}}function m(e){return typeof e=="string"?{text:e}:{text:i(e),highlightLang:"javascript"}}function i(e){var c;let n="";if(e instanceof Error)n=`Error: ${JSON.stringify(e.message)}`;else if(e==null||typeof e=="symbol")n=String(e);else if(Array.isArray(e))n=`[${e.map(i).join(", ")}]`;else if(e instanceof Set){const r=[...e];n=`Set (${e.size}) {${r.map(i).join(", ")}}`}else if(e instanceof Map){const r=[...e.entries()];n=`Map (${e.size}) {${r.map(([d,p])=>`${i(d)} => ${i(p)}`).join(", ")}}`}else if(e instanceof RegExp)n=e.toString();else if(typeof e=="string")n=JSON.stringify(e);else if(typeof e=="object"){const r=((c=e.constructor)==null?void 0:c.name)??"",d=r&&r==="Object"?"":r;n=(d?`${d}: `:"")+JSON.stringify(e,(g,_)=>_===void 0?"__undefined__":_,2).replace(/"__undefined__"/g,"undefined"),n=String(n)}else n=String(e);return n}function l(e){return e=e.replace('import "reflect-metadata"',"").replace('require("reflect-metadata")',""),e=e.replace("export {};",""),e}return s}let C;async function O(a){C??(C=await V(()=>import("../monaco/bundled-types-BSQQkv1f.js").then(t=>t.t),__vite__mapDeps([1,2,3,4]))),a=C.transpileModule(a,{compilerOptions:{module:C.ModuleKind.ESNext,target:C.ScriptTarget.ES2022},transformers:{after:[de]}}).outputText;const s=/import\s*\((.+)\)/g;return a=a.replace(s,(t,f)=>`__slidev_import(${f})`),await ue(a)}function de(a){const{factory:s}=a,{isImportDeclaration:t,isNamedImports:f,NodeFlags:h}=C;return m=>{var l,e;const i=[...m.statements];for(let n=0;n<i.length;n++){const c=i[n];if(!t(c))continue;let r;const d=(l=c.importClause)==null?void 0:l.namedBindings,p=[];if((e=c.importClause)!=null&&e.name&&p.push(s.createBindingElement(void 0,s.createIdentifier("default"),c.importClause.name)),d)if(f(d)){for(const _ of d.elements)p.push(s.createBindingElement(void 0,_.propertyName,_.name));r=s.createObjectBindingPattern(p)}else r=s.createIdentifier(d.name.text);else r=s.createObjectBindingPattern(p);const g=s.createVariableStatement(void 0,s.createVariableDeclarationList([s.createVariableDeclaration(r,void 0,void 0,s.createAwaitExpression(s.createCallExpression(s.createIdentifier("import"),void 0,[c.moduleSpecifier])))],h.Const));i[n]=g}return s.updateSourceFile(m,i)}}const me=N({__name:"DomElement",props:{element:{}},setup(a){const s=a,t=S();return P(()=>{t.value&&t.value.appendChild(s.element)}),(f,h)=>(o(),u("div",{ref_key:"container",ref:t},null,512))}}),pe={key:0,class:"text-sm text-center opacity-50"},fe={key:1,class:"text-sm text-center opacity-50"},he={key:2,class:"text-sm text-center opacity-50"},_e=["innerHTML"],ve={key:1,class:"text-red-500"},ge={key:3,class:"output-line"},ye=["innerHTML"],xe={key:2,class:"separator"},we={key:0,class:"absolute right-1 top-1 max-h-full flex gap-1"},je=N({__name:"CodeRunner",props:{modelValue:{},lang:{},autorun:{type:[Boolean,String]},height:{},showOutputAt:{type:[null,Boolean,String,Number,Array]},highlightOutput:{type:Boolean},runnerOptions:{}},emits:["update:modelValue"],setup(a,{emit:s}){const t=a,f=s,{isPrintMode:h}=ie(),m=J(t,"modelValue",f),{$renderContext:i,$clicksContext:l}=re(),e=H(()=>!["slide","presenter"].includes(i.value)),n=h.value?"once":t.autorun,c=S(n),r=z(),d=S(0),p=S(),g=S(t.showOutputAt);if(t.showOutputAt){const x=oe();F(()=>{const y=l.calculate(t.showOutputAt);y?(l.register(x,y),q(()=>{g.value=!y.isActive.value})):g.value=!1}),U(()=>l.unregister(x))}const _=se(200,async()=>{if(e.value)return;const{highlight:x,run:y}=await ce();p.value=x;const E=setTimeout(()=>{c.value=!0},500);r.value=j(await y(m.value,t.lang,t.runnerOptions??{})),d.value+=1,c.value=!1,clearTimeout(E)});return n==="once"?_():n&&K(m,_,{immediate:!0}),(x,y)=>{var A;const E=D;return o(),u(b,null,[Q(G("div",{class:"relative flex flex-col rounded-b border-t border-main",style:Z({height:t.height}),"data-waitfor":".slidev-runner-output"},[e.value?(o(),u("div",pe,' Code is disabled in the "'+$(k(i))+'" mode ',1)):c.value?(o(),u("div",fe," Running... ")):(A=r.value)!=null&&A.length?(o(),u("div",{key:`run-${d.value}`,class:"slidev-runner-output"},[(o(!0),u(b,null,T(r.value,(v,I)=>(o(),u(b,{key:I},["html"in v?(o(),u("div",{key:0,innerHTML:v.html},null,8,_e)):"error"in v?(o(),u("div",ve,$(v.error),1)):"element"in v?(o(),X(me,{key:2,element:v.element},null,8,["element"])):(o(),u("div",ge,[(o(!0),u(b,null,T(k(j)(v),(w,R)=>(o(),u(b,{key:R},[w.highlightLang&&p.value?(o(),u("span",{key:0,class:"highlighted",innerHTML:p.value(w.text,w.highlightLang)},null,8,ye)):(o(),u("span",{key:1,class:Y(w.class)},$(w.text),3)),R<k(j)(v).length-1?(o(),u("span",xe,",")):B("v-if",!0)],64))),128))]))],64))),128))])):(o(),u("div",he," Click the play button to run the code "))],4),[[W,!g.value]]),k(m).trim()?(o(),u("div",we,[M(ae,{class:"w-8 h-8 max-h-full flex justify-center items-center",title:"Run code",onClick:k(_)},{default:ee(()=>[M(E)]),_:1},8,["onClick"])])):B("v-if",!0)],64)}}});export{je as default};
